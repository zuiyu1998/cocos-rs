参考 cocos 源码实现的版本
